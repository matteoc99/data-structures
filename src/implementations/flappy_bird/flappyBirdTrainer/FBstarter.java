package implementations.flappy_bird.flappyBirdTrainer;

import data_structures.ai.network.Network;
import data_structures.ai.network_gui.NetworkGUI;
import implementations.flappy_bird.agent.Agent;
import implementations.flappy_bird.agent.cosi.CosiAgent;
import implementations.flappy_bird.flappyBirdGUI.PlayGround;


/**
 * Created by mcosi on 12/06/2017.
 */
public class FBstarter {
    public static void main(String[] args) {
        while (true) {
            //new PlayGround(new double[]{3.0,2.0,4.0,1.0,1.0,0.7094521954299575,0.36497848695148094,0.15657197243883725,-0.8189818283941945,1.0,-0.4002579920366134,0.9080708575834122,0.6787179293304875,0.23138362173391358,1.0,0.33886321010881826,1.0,0.6471375097374013,1.0,0.9656334932755535,1.0,-0.9691419860273811,1.0},1);
            NetworkGUI n = new NetworkGUI();
            Agent a[] = new Agent[2];
            a[0] = null;
            a[1] = new CosiAgent(new Network(new double[]{2.0, 3.0, 1.0, 0.517610840323103, 0.7925782672297288, 0.08908431360319224, 0.3105912890835614, 0.6825438171835029, 0.48143677676899643, 0.18323247093553074,}));
            //  a[1] = new CosiAgent(new Network(new double[]{4.0,2.0,14.0,9.0,1.0,1.0,0.4981519402694392,-0.04648778061643033,0.6238371529823428,-0.4857891038356632,-0.883576504096778,-0.5074436833334295,-0.5883883371815641,0.03647762531160592,0.33899567100178385,-0.6702551328649886,0.20138022906294695,0.5003831798606722,0.06898773145067838,-0.3530638632961969,1.0,-0.9199200669374143,-0.6023265961370841,0.9757761584417808,-0.9588329374365698,0.26906840140945154,0.22849013693329012,0.7253538604631518,0.30738871309450744,-0.010379978063911999,0.9231573918015687,-0.08463457350498316,-0.8181256262745751,0.5203105044300349,0.6476440487953241,1.0,-0.4919084072750506,-0.8786877444153436,-0.6461776353787148,0.5647856847721133,0.3612981941752633,0.8898602402121485,-0.4264068775583687,-0.5231368835885519,-0.42399575426565406,1.0,-0.7637929071867939,-0.9038805160916941,0.44115268214487124,-0.1881348470318358,0.26494816197096105,0.26262088436222375,0.4285761203921552,0.4650075903401192,0.2413510071464957,1.0,-0.585842898004423,-0.11340356421320119,-0.34020722007600046,-0.48414931705440667,0.5471841051929998,0.6710192634483951,-0.6248736631209542,0.014381491680004466,-0.07807583328059686,1.0,-0.7726229827219677,0.7075725386358711,-0.6870841268700072,-0.4161836399115366,-0.8689132201671048,0.267672011765671,0.6993480507160361,-0.8412962143104494,-0.8634097034115655,1.0,0.012502566128820725,0.8231255665579638,0.9953051207049759,-0.2608016358411309,-0.5633366406681326,0.5427964505812699,-0.24609150023017534,0.9193794134697546,0.9755028947757254,1.0,0.4039067293760248,-0.12188340578681278,0.21774555556539887,0.7185527655477597,-0.1855522112269954,-0.9631386917647131,-0.4199930842769948,-0.9122315453451146,0.4323187403066402,1.0,0.5867990122519167,-0.4853203025134798,0.004320836799330152,-0.4609650411497086,-0.6194141378560551,0.022349115439770362,0.24932083095934954,0.24617934345723524,0.8344251674822376,1.0,-0.5161958992683833,-0.7819985170351329,0.2658585594949163,-0.9313322700071212,-0.7646234536521181,-0.9264777678886502,-0.32630837635151755,0.1481381022926216,0.9133328960237033,1.0,0.4257000999015732,0.6026252274897768,0.9742495412490249,-0.18481800114563107,-0.9083860306047693,0.1281339744557224,-0.7811386715408246,0.5042787119648819,-0.7608320692586106,1.0,-0.2598693930476075,0.8402224929698712,0.6751183618872294,-0.7286584224410932,0.744176765142673,-0.8157628902171965,-0.09976784368612646,-0.8220061548983155,0.6943496514490255,1.0,-0.5503235262386776,-0.7043895547608963,-0.2362704224481964,-0.4676130534756029,0.3838542610131328,0.3700954004576782,-0.8455226244309109,-0.5075035435740074,-0.5243284563922772,1.0,0.36520088064834555,0.2920680257504791,0.028483750595715618,0.6258288609705815,-0.7546677957876617,0.7452445336841835,0.029616422891774352,0.2993933069433634,0.16439497567514905,1.0,-0.9028265216891469,0.4139081395723485,-0.49620023468991703,0.7132972917824678,0.4136697530469997,0.8222734415248181,0.5857544555644638,0.5438651997535131,0.8529869173295888,1.0,0.5842677137683359,-0.1965980258888611,0.06820713289245339,0.34716525825363065,0.3858936613442654,0.9055050932567561,0.8485787608663895,0.4665711929477532,-0.8577793570721446,1.0,-0.4627204241750573,1.0,-0.9786851835984198,1.0,0.07340199704544914,1.0,0.4623295006939774,1.0,-0.8070855385356224,1.0,0.6394106658583303,1.0,0.17657015555026856,1.0,0.7913601665222145,1.0,0.647701635687628,1.0}));

            //a[1] = new CosiAgent(new Network(new double[]{3.0, 2.0, 7.0, 1.0, 1.0, 0.8468068383582079, -0.17916277122488067, -0.14818614632824345, 0.18683090024587745, -0.8242383680301268, 0.9787088999183564, -0.34936736101893473, 1.0, -0.25356500326278786, -0.5629768571967864, -0.5426166901151186, -0.03471540923708272, 0.7906485850286735, -0.7320396702633274, -0.3290530145930588, 1.0, -0.24081193743290763, 1.0, 0.4033542287221814, 1.0, 0.18321916887852185, 1.0, 0.9420411816629457, 1.0, -0.39725714981094473, 1.0, 0.6764237181590598, 1.0, 0.2349357984817817, 1.0}));

            new PlayGround(a, 1);
            for (int i = 0; i < a.length; i++) {
                if (a[i] != null)
                    n.addNetwork(a[i].getNet(), "hi");
            }

            while (!PlayGround.trainingOver) {
                try {
                    Thread.sleep(100);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }

            }
            if (a[0] != null)
                System.out.println("Agent " + (a[0].getFitness() > a[1].getFitness() ? 0 : 1));
            n.dispose();
        }
    }

    private static int bestFitness(Agent[] a) {
        double best = -1;
        int index = -1;
        for (int i = 0; i < a.length; i++) {
            if (a[i].getFitness() > best) {
                best = a[i].getFitness();
                index = i;
            }

        }
        return index;
    }
}
